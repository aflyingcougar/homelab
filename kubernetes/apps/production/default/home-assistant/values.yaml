---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: home-assistant
  namespace: default
spec:
  values:
    controller:
      type: StatefulSet
    ingress:
      className: nginx
      enabled: true
      hosts:
        - host: &host home.${SECRET_DOMAIN}
          paths:
            - path: /
              pathType: ImplementationSpecific
      tls:
        - hosts:
            - *host
    persistence:
      enabled: true
      existingVolume: "home-assistant"
